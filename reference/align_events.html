<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aligns data by events — align_events • sofunCalVal</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,300;0,400;0,700;1,300;1,400&amp;display=swap" rel="stylesheet"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- geco --><link href="../geco.css" rel="stylesheet"><meta property="og:title" content="Aligns data by events — align_events"><meta property="og:description" content="Uses a vectory specifying whether data falls into an event to reshape data,
aligning by the onset of the event"><meta name="twitter:card" content="summary"></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">

    <div class="navbar-header">

      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="external-link hidden-sm hidden-xs" href="https://geco-group.org/">
          <img src="https://raw.githubusercontent.com/computationales/GECO_template/main/geco_logo_white_small.png" id="hexlogo" alt="GECO"></a>
        <a class="external-link hidden-md hidden-lg" href="https://geco-group.org/">
          <img src="https://raw.githubusercontent.com/computationales/GECO_template/main/geco_logo_white_small.png" id="hexlogo" alt="GECO"></a>
        <a class="navbar-brand" href="../index.html">
           <i>sofunCalVal <small>v1.0</small></i>
        </a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/0_p-model_current_run.html">P-model current run</a>
    </li>
    <li>
      <a href="../articles/1_p-model_reference_run.html">P-model reference run</a>
    </li>
  </ul></li>
        <li>
  <a href="https://github.com/geco-bern/sofunCalVal/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aligns data by events</h1>
    <small class="dont-index">Source: <a href="https://github.com/geco-bern/sofunCalVal/blob/main/R/align_events.R" class="external-link"><code>R/align_events.R</code></a></small>
    <div class="hidden name"><code>align_events.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses a vectory specifying whether data falls into an event to reshape data,
aligning by the onset of the event</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">align_events</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">df_isevent</span>,</span>
<span>  <span class="va">dovars</span>,</span>
<span>  <span class="va">leng_threshold</span>,</span>
<span>  <span class="va">before</span>,</span>
<span>  <span class="va">after</span>,</span>
<span>  do_norm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nbins <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  normbin <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A data frame containing all data continuously along time,
required columns: <code>"site", "date"</code>.</p></dd>


<dt id="arg-df-isevent">df_isevent<a class="anchor" aria-label="anchor" href="#arg-df-isevent"></a></dt>
<dd><p>A data frame <code>nrow(df_isevent)==nrow(df)</code> specifying
whether respective dates (matching dates in <code>df</code>), satisfy a condition
that is used to define events. Events are then derived by this function as
consecutive dates where this condition is satisfied (the minimum length for
defining an event is given by argument <code>leng_threshold</code>). Required
columns in both <code>df</code> and <code>df_isevent</code>: <code>"site", "date"</code></p></dd>


<dt id="arg-dovars">dovars<a class="anchor" aria-label="anchor" href="#arg-dovars"></a></dt>
<dd><p>A vector of character strings specifying which columns
(by column name) of <code>df</code> to re-arrange.</p></dd>


<dt id="arg-leng-threshold">leng_threshold<a class="anchor" aria-label="anchor" href="#arg-leng-threshold"></a></dt>
<dd><p>An integer specifying the minimum number of consecutive
dates required to define an event. All events of length lower than
<code>leng_threshold</code> are dropped.</p></dd>


<dt id="arg-before">before<a class="anchor" aria-label="anchor" href="#arg-before"></a></dt>
<dd><p>An integer specifying the number of days before the event
onset to be retained in re-arranged data</p></dd>


<dt id="arg-after">after<a class="anchor" aria-label="anchor" href="#arg-after"></a></dt>
<dd><p>An integer specifying the number of days after the event
onset to be retained in re-arranged data</p></dd>


<dt id="arg-do-norm">do_norm<a class="anchor" aria-label="anchor" href="#arg-do-norm"></a></dt>
<dd><p>A logical specifying whether re-arranged data is to be
normalised by the median value of the bin
(number of bins given by argument <code>nbins</code>) before the event onset,
given by argument <code>normbin</code>. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-nbins">nbins<a class="anchor" aria-label="anchor" href="#arg-nbins"></a></dt>
<dd><p>An integer, specifying the number of bins used to determine
median values before event onset. Only used when codedo_norm=TRUE.
Defaults to 6.</p></dd>


<dt id="arg-normbin">normbin<a class="anchor" aria-label="anchor" href="#arg-normbin"></a></dt>
<dd><p>An integer, specifying the bin number just before the event
onset, used for normalisation. Only used when codedo_norm=TRUE.
Defaults to 2.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A named list of data frames (<code>list( "df_dday", "df_dday_aggbydday")</code>)
containing data from all events and <code>before + after</code> dates (relative
to event onset) with additional columns named <code>"inst"</code>, defining the
event number (instance), and <code>"dday"</code>, defining the date relative to the
respective event onset. The data frame <code>"df_dday"</code> contains rearranged,
but otherwise unchanged data (unless <code>do_norm</code>=TRUE). The data frame
<code>"df_dday_aggbydday"</code> containes data aggregated across events with the
 mean and quantiles given for each <code>"dday"</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df_alg</span> <span class="op">&lt;-</span> <span class="fu">align_events</span><span class="op">(</span> <span class="va">df</span>, <span class="va">truefalse</span>, before<span class="op">=</span><span class="fl">30</span>, after<span class="op">=</span><span class="fl">300</span> <span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in df %&gt;% left_join(df_isevent, by = c("site", "date")) %&gt;% mutate(idx_df = 1:n()):</span> could not find function "%&gt;%"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/geco-bern" target="_blank" class="external-link">
                          <div class="icon fab fa-github"></div></a>
                        <a href="https://geco-group.org" target="_blank" class="external-link">
                          <div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/SteniBocker/" target="_blank" class="external-link">
                          <div class="icon fab fa-twitter"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://geco-group.org/" class="external-link">GECO</a></li>
                            <li><a href="https://geco-group.org/people/" class="external-link">Our Team</a></li>
                            <li><a href="https://geco-group.org/contact/" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://github.com/geco-bern" class="external-link">Packages</a></li>
                            <li><a href="https://geco-group.org/publication/" class="external-link">Publications</a></li>
                            <li><a href="https://geco-group.org/post/" class="external-link">Blog</a></li>
                        </ul></div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer></div>






  </body></html>

